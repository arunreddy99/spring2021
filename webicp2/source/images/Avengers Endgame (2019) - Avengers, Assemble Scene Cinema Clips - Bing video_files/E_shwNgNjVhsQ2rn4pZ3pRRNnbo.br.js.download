var VideoAction_Watchlist;(function(){function st(){if(n&&!(n.length<1)){c=DetailPageActionButton.apply(null,[null,s,vt]);pt();var t=c.getCurMeta();t&&t.inWatchlist&&a();l&&(sj_be(n[0],"mouseover",ct),sj_be(_d.body,"scroll",ht),lt(),sj_evt.bind("MySavesBalloon.show",function(){return v(!0)}),sj_evt.bind("MySavesBalloon.hide",function(){return v(!1)}));MySaves.unsaveFunction=at;MySaves.contextMetadata=t}}function ht(){var i=sj_go(n[0],"Top"),u=_d.body.scrollTop,f=_w.innerHeight;t.sb(r,f-i+u)}function ct(){u(n[0],f)&&VideoMySaves.showBalloon(n[0])}function lt(){var i=n[0],t=r.getElementsByTagName("A");i==null||t==null||t.length<2||t[0]==null||t[1]==null||(y(i,t[0],d,g),y(t[0],t[1],o,o),y(t[1],i,g,d),sj_be(t[0],e,k),sj_be(t[1],e,k))}function k(t){var i=n[0];t.keyCode==27&&(i.focus(),MySaves.setBalloonVisible(0),o(t))}function d(t){u(n[0],f)&&(o(t),VideoMySaves.showBalloon(n[0]),MySaves.setBalloonVisible(MySaves.AnimationTimeout.Long))}function o(n){sj_pd(n);sj_sp(n)}function g(){MySaves.setBalloonVisible(MySaves.AnimationTimeout.Short)}function at(t){var r={collectionId:null,collectionType:CollectionType.VideoWatchLater,mid:t.mid,murl:t.mediaUrl,purl:t.pageUrl,query:nt()},u=i.TransactionType.Delete;tt(r,sj_et(event),u,null);n[0].focus();a()}function vt(e,o){var h;if(o&&(h=ft(s,e.target),h)){var c=u(h,f),y={collectionId:null,collectionType:CollectionType.VideoWatchLater,mid:o.mid,murl:o.mediaUrl,purl:o.pageUrl,query:nt()},v=i.TransactionType.Write;if(l&&c)v=i.TransactionType.Delete,t.sdt(r,4);else if(l)VideoMySaves.showBalloon(n[0]);else if(c)return;tt(y,sj_et(e),v,null);a();sj_pd(e);sj_sp(e)}}function nt(){var t=parseQueryParams(),n=t.q;return n!=null&&typeof n!="undefined"&&(n=decodeURIComponent(n)),n||""}function tt(n,t,r,u){var f=i.extns(t.parentNode);f&&i.lfi(f,i.instCl,i.addFromDetailPageInstComponentName,JSON.stringify(n));et(n,r,t,u)}function a(){c.switchTitleOnMainText();yt(f);it()}function yt(t){for(var r,i=0;i<n.length;++i)for(r=u(n[0],t)?ut:rt,i=0;i<n.length;++i)r(n[i],t)}function pt(){v(!1);it()}function v(n){r&&p(r,"aria-expanded",n.toString())}function it(){h=!h;p(n[0],"aria-pressed",h.toString())}function y(n,t,i,r){n!=null&&t!=null&&(sj_be(n,e,function(n){n.shiftKey||n.keyCode!=w||(i!=null&&i(n),t.focus())}),sj_be(t,e,function(t){t.shiftKey&&t.keyCode==w&&(r!=null&&r(t),n.focus())}))}var t=pMMUtils,rt=t.ac,u=t.hc,ut=t.rc,p=t.sa,ft=t.gaebc,i=VideoFavoritesUtil,et=i.sxhr,s="action_watchlist",f="saved",w=9,e="keydown",h=!0,b=_ge("actionbar"),n=b&&t.gebc(s,b),r=_ge("ms_ba"),ot=_ge("fav_msg_mt"),c,l=r&&ot;st()})(VideoAction_Watchlist||(VideoAction_Watchlist={}))