var ThumbnailPlayer;(function(n){function pt(){w||(w=!0,tt(_w,st,wt,!0))}function wt(){f=[];w=!1}function it(n,t,i,r,u,f,e,o){var s=null,h=!0;switch(n){case VRHEnums.ThumbnailType.ST:s=ThUrlGenerator.NewThumbnailUrl(t,i,u,f,e,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);r==VRHEnums.HoveredElementType.Adult&&(s+="&m=3");break;case VRHEnums.ThumbnailType.MT:case VRHEnums.ThumbnailType.MMMT:h=!1;s=o;break;default:return null}return k(s,h)}function bt(n){if(f[n])return f[n].clientHeight}var ut="vrhi",ft="vt_vp",et="vrhtpc",ot="player_ol",st="unload",b="thumbnailplayer",h="undefined",i=typeof pMMUtils!=h?pMMUtils:null,v=typeof SmartEvent!=h?SmartEvent:null,r=typeof VideoRichHoverUtils!=h?VideoRichHoverUtils:null,t=typeof VRHConsts!=h?VRHConsts:null,c=!1,e=null,ht=null,ct=null,k=null,lt=null,at=null,o=null,s=null,d=null,vt=null,y=null,g=null,nt=null,p=null,l=null,tt=null,u=!1,f=[],w=!1,u=!1,a,rt;if(!c&&i&&i.gebc&&i.sc&&i.sw&&i.sh&&i.ga&&i.gfbc&&i.st&&i.ac&&i.ss&&t&&r&&r.showElementFromList&&r.showElementTree&&v&&t&&v.bind&&(e=i.gfbc,ht=i.sepd,ct=i.ga,lt=i.sc,at=i.rc,o=i.sw,s=i.sh,d=i.ss,vt=i.st,y=i.ac,nt=i.gsh,u=i.isTest(),g=r.showElementFromList,p=r.showElement,l=r.showElementTree,k=r.getThumbUrlOrMockThumbUrl,tt=v.bind,c=!0),c&&_w&&!_w[b]){_w[b]=n;function yt(n,t,i,r,u,e,o,s){if(c&&n&&n.length>1){if(!u||!o||!o.thid||!e||e.length<1||!r)return;f[n]&&(f[n]=null);f[n]=new rt(n,t,i,r,u,e,o,s)}return}pt();n.init=yt}n.clientHeight=bt;rt=function(){function n(n,i,r,f,h,c,v,w){var b=this,tt,k;(this.imageThumbnailId=null,this.smtThumbnailLink=null,this.videoPlayer=null,this.imageContainer=null,this.smtContainer=null,this.thumbnailContainer=null,this.playerOverlay=null,this.thumbnailPlayerMeta=null,this.instMeta=null,this.thumbnailClientWidth=0,this.thumbnailClientHeight=0,this.pidStr=null,this.isAdultThumb=!1,this.eventBinded=!1,this.richHoverConfig=null,this.isCanceled=!1,this.playerNameStr=null,this.clientHeight=0,this.elementIntialize=function(n,t,i){return(b.isAdultThumb=b.thumbnailPlayerMeta.isAdultThumb,!b.thumbnailPlayerMeta.thid||b.thumbnailPlayerMeta.thid.length<1)?!1:(b.richHoverConfig=n,b.smtThumbnailLink=b.thumbnailPlayerMeta.smtThumbUrl,b.playerNameStr=i,b.thumbnailClientWidth=b.thumbnailPlayerMeta.thumbnailWidth,b.thumbnailClientHeight=b.thumbnailPlayerMeta.thumbnailHeight,b.thumbnailContainer=e(et,t),b.thumbnailContainer==null)?!1:(o(b.thumbnailContainer,b.thumbnailClientWidth),s(b.thumbnailContainer,b.thumbnailClientHeight),b.pidStr=b.richHoverConfig.pid,b.imageThumbnailId=b.thumbnailPlayerMeta.thid,!0)},this.prepareSMTPlayer=function(){if(b.videoPlayerStatus=VRHEnums.PlayerStatus.None,b.richHoverConfig.fdmtp)return!1;if(b.smtThumbnailLink){if(b.smtContainer=e(ft,b.thumbnailContainer),!b.smtContainer)return!1;if(b.playerOverlay=e(ot,b.thumbnailContainer),o(b.smtContainer,b.thumbnailClientWidth),s(b.smtContainer,b.thumbnailClientHeight),o(b.playerOverlay,b.thumbnailClientWidth),s(b.playerOverlay,b.thumbnailClientHeight),typeof Html5VideoSMTPlayer!="undefined"&&(b.videoPlayer=Html5VideoSMTPlayer),b.videoPlayer&&b.videoPlayer.init&&b.videoPlayer.init(b.smtContainer,b.playerNameStr,b.thumbnailPlayerMeta,b.instMeta,b.richHoverConfig.enmuteinst))return y(b.smtContainer,"load"),a=0,b.eventBind(),!0}return!1},this.eventBind=function(){sj_evt.bind(t.PlayerLoadEvt,b.onVideoLoadding);sj_evt.bind(t.PlayerEndEvt,b.onVideoStop);sj_evt.bind(t.PlayerPauseEvt,b.onVideoPause);sj_evt.bind(t.PlayerStartEvt,b.onVideoStart);sj_evt.bind(t.PlayerDownloadEndEvt,b.onVideoDownloadFinish);sj_evt.bind(t.MMSTSeekEvt,b.onVideoSeek);sj_evt.bind(t.FallbackToNonSMTEvt,b.onFallbackToNonSMT);sj_evt.bind(t.PlayerErrEvt,b.onVideoPlayErr);sj_evt.bind(t.HoverCancelEvt,b.onHoverCancel);u&&sj_evt.bind(t.HoverDisplay,b.onHoverDisplay);b.eventBinded=!0},this.eventUnbind=function(){b.eventBinded&&(sj_evt.unbind(t.PlayerLoadEvt,b.onVideoLoadding),sj_evt.unbind(t.PlayerEndEvt,b.onVideoStop),sj_evt.unbind(t.PlayerPauseEvt,b.onVideoPause),sj_evt.unbind(t.PlayerStartEvt,b.onVideoStart),sj_evt.unbind(t.PlayerDownloadEndEvt,b.onVideoDownloadFinish),sj_evt.unbind(t.MMSTSeekEvt,b.onVideoSeek),sj_evt.unbind(t.PlayerErrEvt,b.onVideoPlayErr),u&&sj_evt.unbind(t.HoverDisplay,b.onHoverDisplay),b.eventBinded=!1)},this.isCallMe=function(n){return b.videoPlayer&&n&&n.length>2&&n[2]===b.playerNameStr},this.onVideoPlayErr=function(n){b.isCallMe(n)&&(b.videoPlayerStatus=VRHEnums.PlayerStatus.Stopped,b.isCanceled=!1,l(b.smtContainer,!1));sj_evt.fire(t.FallbackToNonSMTEvt)},this.onHoverCancel=function(){b.eventUnbind()},this.onHoverDisplay=function(){u&&console.log("hit hover player")},this.onVideoStart=function(n){if(b.videoPlayerStatus!==VRHEnums.PlayerStatus.Playing&&b.isCallMe(n))if(b.isCanceled)b.onVideoStop(n);else a===0&&(a=sb_st(function(){if((sb_ct(a),b.videoPlayerStatus!==VRHEnums.PlayerStatus.Playing)&&b.videoPlayer&&b.isCanceled){b.onVideoStop(n);return}},20))},this.onVideoSeek=function(n){if(b.videoPlayerStatus===VRHEnums.PlayerStatus.Playing&&n&&!(n.length<3)&&b.videoPlayer&&b.videoPlayer.seekVideo){var t=parseInt(n[2]);isNaN(t)||b.videoPlayer.seekVideo(t)}},this.onVideoLoadding=function(n){b.isCallMe(n)&&(y(b.smtContainer,"load"),b.videoPlayerStatus=VRHEnums.PlayerStatus.Loading)},this.onVideoStop=function(n){b.isCallMe(n)&&(b.videoPlayerStatus=VRHEnums.PlayerStatus.Stopped,b.isCanceled=!1,l(b.smtContainer,!1))},this.onVideoDownloadFinish=function(){b.smtContainer&&(l(b.smtContainer,!0),b.videoPlayerStatus=VRHEnums.PlayerStatus.Playing,u&&sj_evt.fire(t.HoverDisplay))},this.onFallbackToNonSMT=function(){b.imageContainer&&(p(b.imageContainer,!0),u&&sj_evt.fire(t.HoverDisplay))},this.onVideoPause=function(n){b.isCallMe(n)&&(b.videoPlayerStatus=VRHEnums.PlayerStatus.Paused)},this.onThumbnailLoaded=function(){p(b.imageContainer,!0);sj_evt.fire(t.HoverThumbLoadEvt,b.instMeta,b.playerNameStr)},this.initializeThumbnailContainer=function(n,t){if(b.imageContainer=e(ut,t),!b.imageContainer)return!1;var i=it(VRHEnums.ThumbnailType.ST,b.imageThumbnailId,b.isAdultThumb,b.hoverType,b.thumbnailClientWidth,b.thumbnailClientHeight,b.pidStr,b.smtThumbnailLink);return i==null?!1:(b.thumbnailPlayerMeta.smtThumbUrl&&(b.thumbnailPlayerMeta.smtThumbUrl=it(VRHEnums.ThumbnailType.MT,b.imageThumbnailId,b.isAdultThumb,b.hoverType,b.thumbnailClientWidth,b.thumbnailClientHeight,b.pidStr,b.smtThumbnailLink)),b.thumbnailPlayerMeta.imageThumbUrl=i,b.imageContainer.onload=b.onThumbnailLoaded,b.imageContainer.src=i,b.imageContainer.alt=b.thumbnailPlayerMeta.videoTitle,b.thumbnailPlayerMeta.beginClipIndex>1?d(b.imageContainer,"margin-left",(1-b.thumbnailPlayerMeta.beginClipIndex)*b.thumbnailClientWidth+"px"):(o(b.imageContainer,b.thumbnailClientWidth),s(b.imageContainer,b.thumbnailClientHeight)),!0)},!n||n.length<1||!v)||(this.thumbnailPlayerMeta=v,this.hoverType=r,w&&(this.instMeta=w),tt=new Array(0),this.elementIntialize(f,h,c))&&this.initializeThumbnailContainer(tt,this.thumbnailContainer)&&(tt.push(this.thumbnailContainer),k=this.prepareSMTPlayer(tt),k||sj_evt.fire(VRHConsts.FallbackToNonSMTEvt),ThumbnailPlayerOverlay&&ThumbnailPlayerOverlay.init&&ThumbnailPlayerOverlay.init(n,h,this.playerNameStr,i,r,this.richHoverConfig,this.thumbnailPlayerMeta,w,k,k?this.videoPlayer.setVolume:null,k?this.videoPlayer.setLastStableVolume:null,k?this.videoPlayer.setMute:null,k?this.videoPlayer.getVolume:null,k?this.videoPlayer.isMute:null),g(tt,!0),this.clientHeight=nt(this.thumbnailContainer))}return n}()})(ThumbnailPlayer||(ThumbnailPlayer={}))